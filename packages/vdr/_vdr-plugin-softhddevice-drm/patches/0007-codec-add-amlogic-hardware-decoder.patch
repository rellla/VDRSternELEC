From e2088f34c38e7895e1aef41c4104dde8e3ec40c3 Mon Sep 17 00:00:00 2001
From: Andreas Baierl <ichgeh@imkreisrum.de>
Date: Thu, 24 Nov 2022 12:07:47 +0100
Subject: [PATCH 7/7] codec: add amlogic hardware decoder

---
 video_drm.c | 8 ++++++++
 1 file changed, 8 insertions(+)

diff --git a/video_drm.c b/video_drm.c
index 581ec31..4c73408 100644
--- a/video_drm.c
+++ b/video_drm.c
@@ -329,6 +329,14 @@ void ReadHWPlatform(VideoRender * render)
 			break;
 		}
 
+		if (strstr(read_ptr, "amlogic")) {
+#ifdef DEBUG
+			printf("ReadHWPlatform: amlogic found\n");
+#endif
+			render->CodecMode = 3;	// set _v4l2m2m for H264
+			break;
+		}
+
 		read_size -= (strlen(read_ptr) + 1);
 		read_ptr = (char *)&read_ptr[(strlen(read_ptr) + 1)];
 	}
-- 
2.30.2

